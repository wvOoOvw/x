"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{5179:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(7629),a=n(3930),i=n(393),o=n(4171),l=n(4566),u=n(1901),c=n(2317),f=n(1235),s=n(1144),m=n(157),p=n(9635),d=n(6028),y=n(7886),v=n(6887),b=n(1966);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function e(t,n,r){if(!t)return[];var a=Object.entries(t).map((function(t){return{name:(0,v.cB)(t[0]),weight:t[1].weight,children:e(t[1][r],[].concat(S(n),[{name:t[0],direction:r}]),r),parent:S(n),collapsed:!1}})),i=a.reduce((function(e,t){return e+t.weight}),0);return a.forEach((function(e){e.allWeight=i,e.percent=(0,v.Iw)(e.weight/i*100,4)})),a.sort((function(e,t){return t.weight-e.weight})),a};function x(e){var t=w(r.useState(""),2),n=t[0],p=t[1];return r.createElement(l.Z,{open:e.open,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:720}},onClose:function(){return e.onClose()}},r.createElement(c.Z,{style:{fontSize:16}},"Filter"),r.createElement(u.Z,{dividers:!0},r.createElement(a.ZP,{container:!0,spacing:1},r.createElement(a.ZP,{item:!0,xs:12},r.createElement(o.Z,{variant:"standard",sx:{"& input":{fontSize:14}},fullWidth:!0,autoFocus:!0,value:n,onChange:function(e){return p(e.target.value)}})),y.Z.state.library?Object.entries(y.Z.state.library).filter((function(e){return e[0].includes(n)})).map((function(t,n){return r.createElement(a.ZP,{item:!0,key:n},r.createElement(s.Z,{onClick:function(){e.onUpdate(t[0]),e.onClose()},style:{height:"100%"}},r.createElement(m.Z,{style:{padding:12,lineHeight:1,fontSize:14}},(0,v.cB)(t[0]))))})):null)),r.createElement(f.Z,null,r.createElement(i.Z,{variant:"contained",onClick:function(){return e.onClose()}},"Apply")))}function P(e){var t=w(r.useState(),2),n=t[0],s=t[1],m=function(e){return e.reduce((function(e,t){return e[t.name][t.direction]}),y.Z.state.library)};return r.useEffect((function(){e.value&&s({name:e.value.name,weight:e.value.weight,allWeight:e.value.allWeight,percent:e.value.percent})}),[e.value]),r.createElement(l.Z,{open:e.open,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:720}},onClose:function(){return e.onClose()}},r.createElement(c.Z,{style:{fontSize:16}},"Edit"),r.createElement(u.Z,{dividers:!0},r.createElement(a.ZP,{container:!0,spacing:1},n?r.createElement(a.ZP,{container:!0,spacing:1},r.createElement(a.ZP,{item:!0,xs:12,style:{fontSize:14}},"Name"),r.createElement(a.ZP,{item:!0,xs:12},r.createElement(o.Z,{sx:{"& input":{fontSize:14}},fullWidth:!0,value:n.name,onChange:function(e){return s((function(t){return t.name=e.target.value,E({},t)}))}})),r.createElement(a.ZP,{item:!0,xs:12,style:{fontSize:14}},"Weight"),r.createElement(a.ZP,{item:!0,xs:12},r.createElement(o.Z,{sx:{"& input":{fontSize:14}},fullWidth:!0,value:n.weight,onChange:function(e){return s((function(t){return t.weight=e.target.value,E({},t)}))}}))):null)),r.createElement(f.Z,null,r.createElement(i.Z,{variant:"contained",onClick:function(){delete m(e.value.parent)[e.value.name],y.Z.state.message="Removed",y.Z.dispatch(),e.onUpdate(),e.onClose()}},"Remove"),r.createElement(i.Z,{variant:"contained",onClick:function(){var t=m(e.value.parent);Number(n.weight)!==e.value.weight&&(t[e.value.name].weight=Number(n.weight)),n.name!==e.value.name&&(t[n.name]=t[e.value.name],delete t[e.value.name]),y.Z.state.message="Updated",y.Z.dispatch(),e.onUpdate(),e.onClose()}},"Update")))}const k=function(){var e=r.useRef(),t=r.useRef(),n=w(r.useState(),2),a=n[0],o=n[1],l=w(r.useState("LR"),2),u=l[0],c=l[1],f=w(r.useState(!1),2),s=f[0],m=(f[1],w(r.useState(),2)),g=m[0],h=m[1],E=w(r.useState(),2),S=E[0],O=E[1],C=w(r.useState(),2),k=C[0],A=C[1],W=function(){var e,n={tooltip:{trigger:"item",triggerOn:"mousemove",borderWidth:0,formatter:function(e){return"".concat(e.data.name," / ").concat(e.data.weight," / ").concat(e.data.percent,"%")}},series:[(e={type:"tree",data:a?j(Z({},a,y.Z.state.library[a]),[],(0,v.yW)(u)[1]):[],top:"2%",left:"8%",bottom:"2%",right:"8%",symbolSize:12,orient:u,expandAndCollapse:!s,label:{position:(0,v.yW)(u)[0],verticalAlign:"middle",align:(0,v.yW)(u)[1],fontSize:12},leaves:{label:{position:(0,v.yW)(u)[1],verticalAlign:"middle",align:(0,v.yW)(u)[0]}},itemStyle:{color:"black"},lineStyle:{color:"black",width:1},emphasis:{focus:"descendant"}},Z(e,"expandAndCollapse",!0),Z(e,"animationDuration",550),Z(e,"animationDurationUpdate",750),e)]};t.current.setOption(n)};return r.useEffect((function(){t.current=b.S1(e.current)}),[]),r.useEffect((function(){W()}),[a,u,s,k]),r.useEffect((function(){if(!s)return null;var e=function(e){O(!0),A(e.data)};return t.current.on("click",e),function(){return t.current.off("click",e)}}),[s]),r.useEffect((function(){y.Z.state.library&&requestAnimationFrame((function(){return o(Object.keys(y.Z.state.library)[0])}))}),[]),r.useEffect((function(){var n=new ResizeObserver((function(e){return t.current.resize()}));return n.observe(e.current),function(){return n.disconnect()}}),[]),r.createElement(r.Fragment,null,r.createElement("div",{style:{width:"100%",height:"calc(100% - 64px)"},ref:function(t){return e.current=t}}),r.createElement("div",{style:{position:"absolute",bottom:16,left:0,right:0,margin:"auto",width:"fit-content",display:"flex"}},r.createElement(i.Z,{variant:"contained",style:{margin:"0 4px"},onClick:function(){return h(!0)}},r.createElement(d.Z,null)),r.createElement(i.Z,{variant:"RL"===u?"contained":"outlined",style:{margin:"0 4px"},onClick:function(){return c("RL")}},r.createElement(p.Z,{style:{transform:"rotate(180deg)"}})),r.createElement(i.Z,{variant:"LR"===u?"contained":"outlined",style:{margin:"0 4px"},onClick:function(){return c("LR")}},r.createElement(p.Z,null))),r.createElement(x,{open:Boolean(g),onClose:function(){return h()},onUpdate:function(e){return o(e)}}),r.createElement(P,{open:Boolean(S),onClose:function(){return O()},onUpdate:function(){return W()},value:k}))}}}]);